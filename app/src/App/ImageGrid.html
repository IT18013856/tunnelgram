<div class="d-flex bg-secondary rounded" style="max-width: 450px;">
  {#each images as image (image.name)}
    <div class="d-flex justify-content-center align-items-center" style="width: {images.length > 1 ? '150px' : 'auto'}; height: {images.length > 1 ? '150px' : 'auto'};">
      {#await image.thumbnail}
        <LoadingIndicator width="50px" height="50px" />
      {:then thumbnail}
        <a href="javascript:void(0)" on:click="showBigImage(image)" style="font-size: 0;" data-toggle="modal" data-target="#bigImage">
          <img src="data:{image.type};base64,{thumbnail}" alt="{image.name}" title="{image.name}" />
        </a>
      {:catch e}
        <span class="badge badge-warning">error</span>
      {/await}
    </div>
  {/each}
</div>

<div class="modal fade" id="bigImage" tabindex="-1" role="dialog" aria-hidden="true" style="max-width: none;">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content border-0 rounded-0" stlye="width: auto;">
      <div class="modal-body p-0">
        {#if _showBigImage}
          <div class="d-flex justify-content-center align-items-center">
            {#await _promise}
              <LoadingIndicator width="50px" height="50px" />
            {:then data}
              <img src="data:{_image.type};base64,{data}" alt="{_image.name}" title="{_image.name}" width="{_image.dataWidth}" style="max-width: 90vw;" />
            {:catch e}
              <span class="badge badge-warning">error</span>
            {/await}
          </div>
        {/if}
      </div>
    </div>
  </div>
</div>

<script>
  import LoadingIndicator from './LoadingIndicator.html';

  export default {
    data () {
      return {
        _showBigImage: false
      };
    },

    methods: {
      showBigImage (_image) {
        this.set({
          _showBigImage: true,
          _image,
          _promise: _image.data.promise()
        })
      }
    },

    components: {
      LoadingIndicator
    }
  };
</script>
